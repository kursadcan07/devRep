{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kursa\\\\IdeaProjects\\\\devRep\\\\src\\\\PersonelScreens\\\\PreviousPermissions.js\";\nimport React from \"react\";\nimport BootstrapSwitchButton from 'bootstrap-switch-button-react';\nimport StickyHeadTable from \"./StickyHeadTable\";\nimport { connect } from \"react-redux\";\nimport Switch from \"@material-ui/core/Switch\";\nimport Fade from 'react-reveal/Fade';\nimport { Bounce } from \"react-reveal\";\n\nconst axios = require('axios');\n\nconst api = axios.create({\n  baseURL: `http://localhost:4000`\n});\n\nconst mapStateToProps = state => {\n  return {\n    userStatus: state.userLoginReducer.userStatus,\n    displayStatus: state.userLoginReducer.displayStatus,\n    userID: state.userLoginReducer.userID,\n    chiefID: state.userLoginReducer.chiefID,\n    generalManagerID: state.userLoginReducer.generalManagerID,\n    permissionDescription: state.permissionReducer.permissionDescription,\n    personalName: state.userLoginReducer.personalName,\n    beginDateOfPermission: state.permissionReducer.beginDateOfPermission,\n    endDateOfPermission: state.permissionReducer.endDateOfPermission,\n    isPermissionActive: state.permissionReducer.isPermissionActive,\n    begDateSelectionStat: state.permissionReducer.begDateSelectionStat || false,\n    endDateSelectionStat: state.permissionReducer.endDateSelectionStat || false,\n    selectVehicleUsageName: state.permissionReducer.selectVehicleUsageName,\n    selectVehicleUsageID: state.permissionReducer.selectVehicleUsageID,\n    priceOfTrainOrBus: state.permissionReducer.priceOfTrainOrBus,\n    totalDistanceOfIndividualCar: state.permissionReducer.totalDistanceOfIndividualCar,\n    foldCode: state.permissionReducer.foldCode,\n    areaCode: state.permissionReducer.areaCode,\n    displayThePermissionName: state.permissionReducer.displayThePermissionName,\n    setPermissionType: state.permissionReducer.setPermissionType\n  };\n};\n\nfunction createData(userStatus, permissionID, beginDateOfPermission, endDateOfPermission, chiefConfirmStatus, generalManagerConfirmStatus, chiefsDescription, generalManagerDescription) {\n  return {\n    userStatus,\n    permissionID,\n    beginDateOfPermission,\n    endDateOfPermission,\n    chiefConfirmStatus,\n    generalManagerConfirmStatus,\n    chiefsDescription,\n    generalManagerDescription\n  };\n}\n\nclass PreviousPermissions extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      isActive: true,\n      activePassiveHeader: \"AKTİF İZİN TALEPLERİ\"\n    };\n    this.getData = this.getData.bind(this);\n    this.getDataForManagers = this.getDataForManagers.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.bringHeader = this.bringHeader.bind(this);\n\n    if (this.props.userStatus === 1) {\n      this.getData().then(data => {\n        this.setState({\n          data: data\n        });\n      });\n    } else if (this.props.userStatus === 2) {\n      if (this.props.displayStatus === 1) {\n        this.getData(this.props.userID).then(data => {\n          this.setState({\n            data: data\n          });\n        });\n      } else {\n        this.getDataForManagers(this.props.userID).then(data => {\n          this.setState({\n            data: data\n          });\n        });\n      }\n    }\n  }\n\n  componentDidMount() {\n    if (this.props.userStatus === 1) {\n      this.getData(this.props.userID).then(data => {\n        this.setState({\n          data: data\n        });\n      });\n    } else if (this.props.userStatus === 2) {\n      if (this.props.displayStatus === 1) {\n        this.getData(this.props.userID).then(data => {\n          this.setState({\n            data: data\n          });\n        });\n      } else {\n        this.getDataForManagers(this.props.userID).then(data => {\n          this.setState({\n            data: data\n          });\n        });\n      }\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.isActive !== this.state.isActive) {\n      if (this.props.userStatus === 1) {\n        this.getData(this.props.userID).then(data => {\n          this.setState({\n            data: data\n          });\n        });\n      } else if (this.props.userStatus === 2) {\n        if (this.props.displayStatus === 1) {\n          this.getData(this.props.userID).then(data => {\n            this.setState({\n              data: data\n            });\n          });\n        } else {\n          this.getDataForManagers(this.props.userID).then(data => {\n            this.setState({\n              data: data\n            });\n          });\n        }\n      }\n    }\n  }\n\n  getData(userID) {\n    let arr = [];\n    let arr2 = [];\n    return api.get('/displayUsersPermissions/' + userID + '/' + this.state.isActive).then(function (response) {\n      Object.keys(response.data.prevPerms).forEach(function (key) {\n        arr.push(response.data.prevPerms[key]);\n      });\n\n      for (let i = 0; i < arr.length; i++) {\n        arr2.push(createData(arr[i].userStatus, arr[i].permissionID, arr[i].beginDateOfPermission, arr[i].endDateOfPermission, arr[i].chiefConfirmStatus, arr[i].generalManagerConfirmStatus, arr[i].chiefsDescription, arr[i].generalManagerDescription));\n      }\n\n      return arr2;\n    });\n  }\n\n  getDataForManagers(chiefOrManagerID) {\n    console.log(this.props.userStatus, \"Diyorrrr\");\n    let arr = [];\n    let arr2 = [];\n    return api.get('/displayPermissionsForChief/' + chiefOrManagerID + '/' + this.state.isActive).then(function (response) {\n      Object.keys(response.data.prevPerms).forEach(function (key) {\n        arr.push(response.data.prevPerms[key]);\n      });\n\n      for (let i = 0; i < arr.length; i++) {\n        arr2.push(createData(arr[i].userStatus, arr[i].permissionID, arr[i].beginDateOfPermission, arr[i].endDateOfPermission, arr[i].chiefConfirmStatus, arr[i].generalManagerConfirmStatus, arr[i].chiefsDescription, arr[i].generalManagerDescription));\n      }\n\n      return arr2;\n    });\n  }\n\n  handleChange(event) {\n    this.setState({\n      isActive: !this.state.isActive\n    });\n\n    if (event.target.checked) {\n      this.setState({\n        activePassiveHeader: \"AKTİF İZİN TALEPLERİ\"\n      });\n    } else {\n      this.setState({\n        activePassiveHeader: \"GEÇMİŞ İZİN TALEPLERİ\"\n      });\n    }\n\n    this.getData();\n  }\n\n  bringHeader() {\n    return /*#__PURE__*/React.createElement(Bounce, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 13\n      }\n    }, this.state.isActive ? \"AKTİF İZİN TALEPLERİ\" : \"GEÇMİŞ İZİN TALEPLERİ\");\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n        flex: 3\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"center\",\n        marginTop: \"20px\",\n        textAlign: \"center\",\n        flex: 2\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      style: {\n        display: \"flex\",\n        flex: 2,\n        justifyContent: \"center\",\n        flexDirection: \"column\",\n        fontSize: \"40px\",\n        width: \"100%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 21\n      }\n    }, this.bringHeader()), /*#__PURE__*/React.createElement(Switch, {\n      style: {\n        display: \"flex\",\n        margin: \"0\"\n      },\n      checked: this.state.isActive,\n      onChange: this.handleChange,\n      color: \"primary\",\n      name: \"isActive\",\n      inputProps: {\n        'aria-label': 'primary checkbox'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(StickyHeadTable, {\n      rows: this.state.data,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nexport default connect(mapStateToProps)(PreviousPermissions);","map":{"version":3,"sources":["C:/Users/kursa/IdeaProjects/devRep/src/PersonelScreens/PreviousPermissions.js"],"names":["React","BootstrapSwitchButton","StickyHeadTable","connect","Switch","Fade","Bounce","axios","require","api","create","baseURL","mapStateToProps","state","userStatus","userLoginReducer","displayStatus","userID","chiefID","generalManagerID","permissionDescription","permissionReducer","personalName","beginDateOfPermission","endDateOfPermission","isPermissionActive","begDateSelectionStat","endDateSelectionStat","selectVehicleUsageName","selectVehicleUsageID","priceOfTrainOrBus","totalDistanceOfIndividualCar","foldCode","areaCode","displayThePermissionName","setPermissionType","createData","permissionID","chiefConfirmStatus","generalManagerConfirmStatus","chiefsDescription","generalManagerDescription","PreviousPermissions","Component","constructor","props","data","isActive","activePassiveHeader","getData","bind","getDataForManagers","handleChange","bringHeader","then","setState","componentDidMount","componentDidUpdate","prevProps","prevState","arr","arr2","get","response","Object","keys","prevPerms","forEach","key","push","i","length","chiefOrManagerID","console","log","event","target","checked","render","display","flexDirection","justifyContent","flex","marginTop","textAlign","fontSize","width","margin"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport BootstrapSwitchButton from 'bootstrap-switch-button-react'\r\nimport StickyHeadTable from \"./StickyHeadTable\";\r\nimport {connect} from \"react-redux\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport Fade from 'react-reveal/Fade';\r\nimport {Bounce} from \"react-reveal\";\r\n\r\nconst axios = require('axios');\r\n\r\nconst api = axios.create({\r\n    baseURL: `http://localhost:4000`\r\n})\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n\r\n        userStatus: state.userLoginReducer.userStatus,\r\n        displayStatus: state.userLoginReducer.displayStatus,\r\n\r\n        userID: state.userLoginReducer.userID,\r\n        chiefID: state.userLoginReducer.chiefID,\r\n        generalManagerID: state.userLoginReducer.generalManagerID,\r\n\r\n        permissionDescription: state.permissionReducer.permissionDescription,\r\n        personalName: state.userLoginReducer.personalName,\r\n        beginDateOfPermission: state.permissionReducer.beginDateOfPermission,\r\n        endDateOfPermission: state.permissionReducer.endDateOfPermission,\r\n        isPermissionActive: state.permissionReducer.isPermissionActive,\r\n\r\n        begDateSelectionStat: state.permissionReducer.begDateSelectionStat || false,\r\n        endDateSelectionStat: state.permissionReducer.endDateSelectionStat || false,\r\n\r\n        selectVehicleUsageName: state.permissionReducer.selectVehicleUsageName,\r\n        selectVehicleUsageID: state.permissionReducer.selectVehicleUsageID,\r\n        priceOfTrainOrBus: state.permissionReducer.priceOfTrainOrBus,\r\n        totalDistanceOfIndividualCar: state.permissionReducer.totalDistanceOfIndividualCar,\r\n\r\n        foldCode: state.permissionReducer.foldCode,\r\n        areaCode: state.permissionReducer.areaCode,\r\n\r\n        displayThePermissionName: state.permissionReducer.displayThePermissionName,\r\n        setPermissionType: state.permissionReducer.setPermissionType,\r\n\r\n    }\r\n};\r\n\r\nfunction createData(userStatus, permissionID, beginDateOfPermission, endDateOfPermission, chiefConfirmStatus, generalManagerConfirmStatus, chiefsDescription, generalManagerDescription) {\r\n    return {\r\n        userStatus,\r\n        permissionID,\r\n        beginDateOfPermission,\r\n        endDateOfPermission,\r\n        chiefConfirmStatus,\r\n        generalManagerConfirmStatus,\r\n        chiefsDescription,\r\n        generalManagerDescription\r\n    };\r\n}\r\n\r\nclass PreviousPermissions extends React.Component {\r\n\r\n    constructor(props) {\r\n\r\n        super(props);\r\n\r\n        this.state = {\r\n            data: [],\r\n            isActive: true,\r\n            activePassiveHeader: \"AKTİF İZİN TALEPLERİ\"\r\n        }\r\n        this.getData = this.getData.bind(this);\r\n        this.getDataForManagers = this.getDataForManagers.bind(this);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.bringHeader = this.bringHeader.bind(this);\r\n\r\n\r\n        if (this.props.userStatus === 1) {\r\n            this.getData().then((data) => {\r\n                this.setState({data: data})\r\n            });\r\n        } else if (this.props.userStatus === 2) {\r\n            if (this.props.displayStatus===1) {\r\n                this.getData(this.props.userID).then((data) => {\r\n                    this.setState({data: data})\r\n                });\r\n            }\r\n            else{\r\n                this.getDataForManagers(this.props.userID).then((data) => {\r\n                    this.setState({data: data})\r\n                });\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.userStatus === 1) {\r\n            this.getData(this.props.userID).then((data) => {\r\n                this.setState({data: data})\r\n            });\r\n        } else if (this.props.userStatus === 2) {\r\n            if (this.props.displayStatus===1) {\r\n                this.getData(this.props.userID).then((data) => {\r\n                    this.setState({data: data})\r\n                });\r\n            }\r\n            else{\r\n                this.getDataForManagers(this.props.userID).then((data) => {\r\n                    this.setState({data: data})\r\n                });\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n\r\n        if (prevState.isActive !== this.state.isActive) {\r\n\r\n            if (this.props.userStatus === 1) {\r\n                this.getData(this.props.userID).then((data) => {\r\n                    this.setState({data: data})\r\n                });\r\n            } else if (this.props.userStatus === 2) {\r\n                if (this.props.displayStatus===1) {\r\n                    this.getData(this.props.userID).then((data) => {\r\n                        this.setState({data: data})\r\n                    });\r\n                }\r\n                else{\r\n                    this.getDataForManagers(this.props.userID).then((data) => {\r\n                        this.setState({data: data})\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    getData(userID) {\r\n        let arr = [];\r\n        let arr2 = [];\r\n        return api.get('/displayUsersPermissions/' + userID + '/' + this.state.isActive)\r\n            .then(\r\n                function (response) {\r\n\r\n                    Object.keys(response.data.prevPerms).forEach(function (key) {\r\n\r\n                        arr.push(response.data.prevPerms[key]);\r\n\r\n                    });\r\n\r\n                    for (let i = 0; i < arr.length; i++) {\r\n\r\n                        arr2.push(createData(\r\n                            arr[i].userStatus,\r\n                            arr[i].permissionID,\r\n                            arr[i].beginDateOfPermission,\r\n                            arr[i].endDateOfPermission,\r\n                            arr[i].chiefConfirmStatus,\r\n                            arr[i].generalManagerConfirmStatus,\r\n                            arr[i].chiefsDescription,\r\n                            arr[i].generalManagerDescription)\r\n                        )\r\n                    }\r\n\r\n                    return arr2\r\n\r\n                })\r\n    }\r\n\r\n    getDataForManagers(chiefOrManagerID) {\r\n\r\n        console.log(this.props.userStatus,\"Diyorrrr\");\r\n        let arr = [];\r\n        let arr2 = [];\r\n\r\n        return api.get('/displayPermissionsForChief/' + chiefOrManagerID + '/' + this.state.isActive)\r\n            .then(\r\n                function (response) {\r\n\r\n                    Object.keys(response.data.prevPerms).forEach(function (key) {\r\n\r\n                        arr.push(response.data.prevPerms[key]);\r\n\r\n                    });\r\n\r\n                    for (let i = 0; i < arr.length; i++) {\r\n\r\n                        arr2.push(createData(\r\n                            arr[i].userStatus,\r\n                            arr[i].permissionID,\r\n                            arr[i].beginDateOfPermission,\r\n                            arr[i].endDateOfPermission,\r\n                            arr[i].chiefConfirmStatus,\r\n                            arr[i].generalManagerConfirmStatus,\r\n                            arr[i].chiefsDescription,\r\n                            arr[i].generalManagerDescription)\r\n                        )\r\n                    }\r\n\r\n                    return arr2\r\n\r\n                })\r\n    }\r\n\r\n    handleChange(event) {\r\n        this.setState({\r\n            isActive: !this.state.isActive\r\n        });\r\n        if (event.target.checked) {\r\n            this.setState({\r\n                activePassiveHeader: \"AKTİF İZİN TALEPLERİ\"\r\n            })\r\n        } else {\r\n            this.setState({\r\n                activePassiveHeader: \"GEÇMİŞ İZİN TALEPLERİ\"\r\n            })\r\n        }\r\n\r\n        this.getData();\r\n\r\n    }\r\n\r\n    bringHeader() {\r\n        return (\r\n            <Bounce>\r\n                {this.state.isActive ? \"AKTİF İZİN TALEPLERİ\" : \"GEÇMİŞ İZİN TALEPLERİ\"}\r\n            </Bounce>\r\n        )\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div style={{\r\n                display: \"flex\",\r\n                flexDirection: \"column\",\r\n                justifyContent: \"center\",\r\n                flex: 3\r\n            }}>\r\n                <div style={{\r\n                    display: \"flex\",\r\n                    justifyContent: \"center\",\r\n                    marginTop: \"20px\",\r\n                    textAlign: \"center\",\r\n                    flex: 2\r\n                }}>\r\n\r\n                    <h1 style={{\r\n                        display: \"flex\",\r\n                        flex: 2,\r\n                        justifyContent: \"center\",\r\n                        flexDirection: \"column\",\r\n                        fontSize: \"40px\",\r\n                        width: \"100%\"\r\n                    }}>\r\n                        {this.bringHeader()}\r\n                    </h1>\r\n                    <Switch\r\n                        style={{display: \"flex\", margin: \"0\"}}\r\n                        checked={this.state.isActive}\r\n                        onChange={this.handleChange}\r\n                        color=\"primary\"\r\n                        name=\"isActive\"\r\n                        inputProps={{'aria-label': 'primary checkbox'}}\r\n                    />\r\n\r\n                </div>\r\n                <StickyHeadTable rows={this.state.data}/>\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(PreviousPermissions);\r\n"]},"metadata":{},"sourceType":"module"}