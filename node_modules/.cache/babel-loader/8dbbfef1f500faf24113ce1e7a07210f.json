{"ast":null,"code":"var _jsxFileName = \"/home/can/IdeaProjects/devRep/src/PersonelScreens/PreviousPermissions.js\";\nimport React from \"react\";\nimport BootstrapSwitchButton from 'bootstrap-switch-button-react';\nimport StickyHeadTable from \"./StickyHeadTable\";\nimport { connect } from \"react-redux\";\nimport Switch from \"@material-ui/core/Switch\";\nimport Fade from 'react-reveal/Fade';\nimport { Bounce } from \"react-reveal\";\n\nconst axios = require('axios');\n\nconst api = axios.create({\n  baseURL: `http://localhost:4000`\n});\n\nconst mapStateToProps = state => {\n  return {\n    userStatus: state.permissionReducer.userStatus,\n    displayStatus: state.permissionReducer.displayStatus,\n    userID: state.userLoginReducer.userID,\n    usersChiefID: state.userLoginReducer.usersChiefID,\n    generalManagerID: state.userLoginReducer.usersGeneralManagerID,\n    chiefID: state.userLoginReducer.usersChiefID,\n    permissionDescription: state.permissionReducer.permissionDescription,\n    personalName: state.userLoginReducer.personalName,\n    beginDateOfPermission: state.permissionReducer.beginDateOfPermission,\n    endDateOfPermission: state.permissionReducer.endDateOfPermission,\n    isPermissionActive: state.permissionReducer.isPermissionActive,\n    begDateSelectionStat: state.permissionReducer.begDateSelectionStat || false,\n    endDateSelectionStat: state.permissionReducer.endDateSelectionStat || false,\n    selectVehicleUsageName: state.permissionReducer.selectVehicleUsageName,\n    selectVehicleUsageID: state.permissionReducer.selectVehicleUsageID,\n    priceOfTrainOrBus: state.permissionReducer.priceOfTrainOrBus,\n    totalDistanceOfIndividualCar: state.permissionReducer.totalDistanceOfIndividualCar,\n    foldCode: state.permissionReducer.foldCode,\n    areaCode: state.permissionReducer.areaCode,\n    displayThePermissionName: state.permissionReducer.displayThePermissionName,\n    setPermissionType: state.permissionReducer.setPermissionType\n  };\n};\n\nfunction createData(userStatus, permissionID, beginDateOfPermission, endDateOfPermission, chiefConfirmStatus, generalManagerConfirmStatus, chiefsDescription, generalManagerDescription) {\n  return {\n    userStatus,\n    permissionID,\n    beginDateOfPermission,\n    endDateOfPermission,\n    chiefConfirmStatus,\n    generalManagerConfirmStatus,\n    chiefsDescription,\n    generalManagerDescription\n  };\n}\n\nclass PreviousPermissions extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      isActive: true,\n      activePassiveHeader: \"AKTİF İZİN TALEPLERİ\"\n    };\n    this.getData(props.userStatus, this.state.isActive).then(data => {\n      this.setState({\n        data: data\n      });\n    });\n    this.getData = this.getData.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.bringHeader = this.bringHeader.bind(this);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.isActive !== this.state.isActive) {\n      this.getData(this.props.userStatus, this.state.isActive).then(data => {\n        this.setState({\n          data: data\n        });\n      });\n    }\n  }\n\n  getData(userStat, isActive) {\n    if (userStat === 1) {\n      let arr = [];\n      let arr2 = [];\n      console.log(\"displayUsersPermissions\" + this.props.userID + '/' + isActive);\n      return api.get('/displayUsersPermissions/' + this.props.userID + '/' + isActive).then(function (response) {\n        Object.keys(response.data.prevPerms).forEach(function (key) {\n          arr.push(response.data.prevPerms[key]);\n        });\n\n        for (let i = 0; i < arr.length; i++) {\n          arr2.push(createData(arr[i].userStatus, arr[i].permissionID, arr[i].beginDateOfPermission, arr[i].endDateOfPermission, arr[i].chiefConfirmStatus, arr[i].generalManagerConfirmStatus, arr[i].chiefsDescription, arr[i].generalManagerDescription));\n        }\n\n        return arr2;\n      });\n    } else if (userStat === 2) {\n      let arr = [];\n      let arr2 = [];\n      return api.get('/displayManagersPermissions/' + this.props.chiefID + '/' + isActive).then(function (response) {\n        Object.keys(response.data.prevPerms).forEach(function (key) {\n          arr.push(response.data.prevPerms[key]);\n        });\n\n        for (let i = 0; i < arr.length; i++) {\n          arr2.push(createData(arr[i].userStatus, arr[i].permissionID, arr[i].beginDateOfPermission, arr[i].endDateOfPermission, arr[i].chiefConfirmStatus, arr[i].generalManagerConfirmStatus, arr[i].chiefsDescription, arr[i].generalManagerDescription));\n        }\n\n        return arr2;\n      });\n    }\n  }\n  /* getDataForManager() {\n       let arr = [];\n       let arr2 = [];\n        return api.get('/displayUsersPermissions/'+ this.props.usersChiefID+'/'+this.state.isActive)\n           .then(\n               function (response) {\n                    Object.keys(response.data.prevPerms).forEach(function (key) {\n                       arr.push(response.data.prevPerms[key]);\n                   });\n                    for (let i = 0; i < arr.length; i++) {\n                        arr2.push(createData(\n                           arr[i].userStatus,\n                           arr[i].permissionID,\n                           arr[i].beginDateOfPermission,\n                           arr[i].endDateOfPermission,\n                           arr[i].chiefConfirmStatus,\n                           arr[i].generalManagerConfirmStatus,\n                           arr[i].chiefsDescription,\n                           arr[i].generalManagerDescription)\n                       )\n                   }\n                    return arr2\n                })\n   }*/\n\n\n  handleChange(event) {\n    this.setState({\n      isActive: !this.state.isActive\n    });\n\n    if (event.target.checked) {\n      this.setState({\n        activePassiveHeader: \"AKTİF İZİN TALEPLERİ\"\n      });\n    } else {\n      this.setState({\n        activePassiveHeader: \"GEÇMİŞ İZİN TALEPLERİ\"\n      });\n    }\n\n    this.getData();\n  }\n\n  bringHeader() {\n    return /*#__PURE__*/React.createElement(Bounce, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 13\n      }\n    }, this.state.isActive ? \"AKTİF İZİN TALEPLERİ\" : \"GEÇMİŞ İZİN TALEPLERİ\");\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n        flex: 3\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"center\",\n        marginTop: \"20px\",\n        textAlign: \"center\",\n        flex: 2\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      style: {\n        display: \"flex\",\n        flex: 2,\n        justifyContent: \"center\",\n        flexDirection: \"column\",\n        fontSize: \"40px\",\n        width: \"100%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 21\n      }\n    }, this.bringHeader()), /*#__PURE__*/React.createElement(Switch, {\n      style: {\n        display: \"flex\",\n        margin: \"0\"\n      },\n      checked: this.state.isActive,\n      onChange: this.handleChange,\n      color: \"primary\",\n      name: \"isActive\",\n      inputProps: {\n        'aria-label': 'primary checkbox'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(StickyHeadTable, {\n      rows: this.state.data,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nexport default connect(mapStateToProps)(PreviousPermissions);","map":{"version":3,"sources":["/home/can/IdeaProjects/devRep/src/PersonelScreens/PreviousPermissions.js"],"names":["React","BootstrapSwitchButton","StickyHeadTable","connect","Switch","Fade","Bounce","axios","require","api","create","baseURL","mapStateToProps","state","userStatus","permissionReducer","displayStatus","userID","userLoginReducer","usersChiefID","generalManagerID","usersGeneralManagerID","chiefID","permissionDescription","personalName","beginDateOfPermission","endDateOfPermission","isPermissionActive","begDateSelectionStat","endDateSelectionStat","selectVehicleUsageName","selectVehicleUsageID","priceOfTrainOrBus","totalDistanceOfIndividualCar","foldCode","areaCode","displayThePermissionName","setPermissionType","createData","permissionID","chiefConfirmStatus","generalManagerConfirmStatus","chiefsDescription","generalManagerDescription","PreviousPermissions","Component","constructor","props","data","isActive","activePassiveHeader","getData","then","setState","bind","handleChange","bringHeader","componentDidUpdate","prevProps","prevState","userStat","arr","arr2","console","log","get","response","Object","keys","prevPerms","forEach","key","push","i","length","event","target","checked","render","display","flexDirection","justifyContent","flex","marginTop","textAlign","fontSize","width","margin"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport BootstrapSwitchButton from 'bootstrap-switch-button-react'\nimport StickyHeadTable from \"./StickyHeadTable\";\nimport {connect} from \"react-redux\";\nimport Switch from \"@material-ui/core/Switch\";\nimport Fade from 'react-reveal/Fade';\nimport {Bounce} from \"react-reveal\";\n\nconst axios = require('axios');\n\nconst api = axios.create({\n    baseURL: `http://localhost:4000`\n})\n\nconst mapStateToProps = (state) => {\n    return {\n\n        userStatus: state.permissionReducer.userStatus,\n        displayStatus: state.permissionReducer.displayStatus,\n\n        userID: state.userLoginReducer.userID,\n        usersChiefID:state.userLoginReducer.usersChiefID,\n        generalManagerID:state.userLoginReducer.usersGeneralManagerID,\n        chiefID:state.userLoginReducer.usersChiefID,\n\n        permissionDescription: state.permissionReducer.permissionDescription,\n        personalName: state.userLoginReducer.personalName,\n        beginDateOfPermission: state.permissionReducer.beginDateOfPermission,\n        endDateOfPermission: state.permissionReducer.endDateOfPermission,\n        isPermissionActive: state.permissionReducer.isPermissionActive,\n\n        begDateSelectionStat: state.permissionReducer.begDateSelectionStat || false,\n        endDateSelectionStat: state.permissionReducer.endDateSelectionStat || false,\n\n        selectVehicleUsageName: state.permissionReducer.selectVehicleUsageName,\n        selectVehicleUsageID: state.permissionReducer.selectVehicleUsageID,\n        priceOfTrainOrBus: state.permissionReducer.priceOfTrainOrBus,\n        totalDistanceOfIndividualCar: state.permissionReducer.totalDistanceOfIndividualCar,\n\n        foldCode: state.permissionReducer.foldCode,\n        areaCode: state.permissionReducer.areaCode,\n\n        displayThePermissionName: state.permissionReducer.displayThePermissionName,\n        setPermissionType: state.permissionReducer.setPermissionType,\n\n    }\n};\n\nfunction createData(userStatus, permissionID, beginDateOfPermission, endDateOfPermission, chiefConfirmStatus, generalManagerConfirmStatus, chiefsDescription, generalManagerDescription) {\n    return {\n        userStatus,\n        permissionID,\n        beginDateOfPermission,\n        endDateOfPermission,\n        chiefConfirmStatus,\n        generalManagerConfirmStatus,\n        chiefsDescription,\n        generalManagerDescription\n    };\n}\n\nclass PreviousPermissions extends React.Component {\n\n\n    constructor(props) {\n\n        super(props);\n\n\n        this.state = {\n            data: [],\n            isActive: true,\n            activePassiveHeader: \"AKTİF İZİN TALEPLERİ\"\n        }\n\n        this.getData(props.userStatus,this.state.isActive).then((data) => {\n            this.setState({data: data})\n        });\n\n        this.getData = this.getData.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.bringHeader = this.bringHeader.bind(this);\n\n    }\n\n\n    componentDidUpdate(prevProps,prevState) {\n        if(prevState.isActive !==this.state.isActive) {\n            this.getData(this.props.userStatus,this.state.isActive).then((data) => {\n                this.setState({data: data})\n            });\n\n        }\n    }\n\n    getData(userStat,isActive) {\n        if(userStat ===1) {\n\n\n           let arr = [];\n            let arr2 = [];\n            console.log(\"displayUsersPermissions\" + this.props.userID + '/' + isActive)\n            \n            return api.get('/displayUsersPermissions/' + this.props.userID + '/' + isActive)\n                .then(\n                    function (response) {\n\n                        Object.keys(response.data.prevPerms).forEach(function (key) {\n\n                            arr.push(response.data.prevPerms[key]);\n\n                        });\n\n                        for (let i = 0; i < arr.length; i++) {\n\n                            arr2.push(createData(\n                                arr[i].userStatus,\n                                arr[i].permissionID,\n                                arr[i].beginDateOfPermission,\n                                arr[i].endDateOfPermission,\n                                arr[i].chiefConfirmStatus,\n                                arr[i].generalManagerConfirmStatus,\n                                arr[i].chiefsDescription,\n                                arr[i].generalManagerDescription)\n                            )\n                        }\n\n                        return arr2\n\n                    })\n        }\n        else if (userStat===2){\n\n            let arr = [];\n            let arr2 = [];\n\n            return api.get('/displayManagersPermissions/' + this.props.chiefID + '/' + isActive)\n                .then(\n                    function (response) {\n\n                        Object.keys(response.data.prevPerms).forEach(function (key) {\n\n                            arr.push(response.data.prevPerms[key]);\n\n                        });\n\n                        for (let i = 0; i < arr.length; i++) {\n\n                            arr2.push(createData(\n                                arr[i].userStatus,\n                                arr[i].permissionID,\n                                arr[i].beginDateOfPermission,\n                                arr[i].endDateOfPermission,\n                                arr[i].chiefConfirmStatus,\n                                arr[i].generalManagerConfirmStatus,\n                                arr[i].chiefsDescription,\n                                arr[i].generalManagerDescription)\n                            )\n                        }\n\n                        return arr2\n\n                    })\n        }\n    }\n   /* getDataForManager() {\n        let arr = [];\n        let arr2 = [];\n\n        return api.get('/displayUsersPermissions/'+ this.props.usersChiefID+'/'+this.state.isActive)\n            .then(\n                function (response) {\n\n                    Object.keys(response.data.prevPerms).forEach(function (key) {\n                        arr.push(response.data.prevPerms[key]);\n                    });\n\n                    for (let i = 0; i < arr.length; i++) {\n\n                        arr2.push(createData(\n                            arr[i].userStatus,\n                            arr[i].permissionID,\n                            arr[i].beginDateOfPermission,\n                            arr[i].endDateOfPermission,\n                            arr[i].chiefConfirmStatus,\n                            arr[i].generalManagerConfirmStatus,\n                            arr[i].chiefsDescription,\n                            arr[i].generalManagerDescription)\n                        )\n                    }\n\n                    return arr2\n\n                })\n    }*/\n\n    handleChange(event) {\n        this.setState({\n            isActive: !this.state.isActive\n        });\n        if (event.target.checked) {\n            this.setState({\n                activePassiveHeader: \"AKTİF İZİN TALEPLERİ\"\n            })\n        } else {\n            this.setState({\n                activePassiveHeader: \"GEÇMİŞ İZİN TALEPLERİ\"\n            })\n        }\n\n        this.getData();\n\n    }\n\n    bringHeader() {\n    return(\n            <Bounce>\n                    {this.state.isActive ? \"AKTİF İZİN TALEPLERİ\" : \"GEÇMİŞ İZİN TALEPLERİ\"}\n            </Bounce>\n    )   }\n\n\n    render() {\n        return (\n            <div style={{\n                display: \"flex\",\n                flexDirection: \"column\",\n                justifyContent: \"center\",\n                flex: 3\n            }}>\n                <div style={{\n                    display: \"flex\",\n                    justifyContent: \"center\",\n                    marginTop: \"20px\",\n                    textAlign: \"center\",\n                    flex: 2\n                }}>\n\n                    <h1 style={{\n                        display: \"flex\",\n                        flex: 2,\n                        justifyContent: \"center\",\n                        flexDirection: \"column\",\n                        fontSize: \"40px\",\n                        width: \"100%\"\n                    }}>\n                        {this.bringHeader()}\n                    </h1>\n                    <Switch\n                        style={{display: \"flex\", margin: \"0\"}}\n                        checked={this.state.isActive}\n                        onChange={this.handleChange}\n                        color=\"primary\"\n                        name=\"isActive\"\n                        inputProps={{'aria-label': 'primary checkbox'}}\n                    />\n\n                </div>\n                <StickyHeadTable rows={this.state.data}/>\n            </div>\n\n        )\n    }\n}\n\nexport default connect(mapStateToProps)(PreviousPermissions);\n"]},"metadata":{},"sourceType":"module"}